openapi: 3.0.1
info:
  title: 默认模块
  description: 跳蚤市场系统接口文档
  version: 1.0.0
tags:
  - name: 订单管理
paths:
  /order/{orderId}/pay:
    put:
      summary: 支付订单
      deprecated: false
      description: 用户支付订单
      operationId: payOrder
      tags:
        - 订单管理
      parameters:
        - name: orderId
          in: path
          description: 订单ID
          required: true
          example: 0
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponseBoolean'
          headers: {}
      security: []
  /order/{orderId}/complete:
    put:
      summary: 完成订单
      deprecated: false
      description: 卖家或买家确认订单完成
      operationId: completeOrder
      tags:
        - 订单管理
      parameters:
        - name: orderId
          in: path
          description: 订单ID
          required: true
          example: 0
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponseBoolean'
          headers: {}
      security: []
  /order/{orderId}/cancel:
    put:
      summary: 取消订单
      deprecated: false
      description: 用户取消订单。如果是积分兑换订单，取消时会返还积分
      operationId: cancelOrder
      tags:
        - 订单管理
      parameters:
        - name: orderId
          in: path
          description: 订单ID
          required: true
          example: 0
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponseBoolean'
          headers: {}
      security: []
  /order/confirm:
    put:
      summary: 确认订单
      deprecated: false
      description: 买家确认收货
      operationId: confirmOrder
      tags:
        - 订单管理
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderConfirmRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponseBoolean'
          headers: {}
      security: []
  /order:
    post:
      summary: 创建订单
      deprecated: false
      description: 用户创建新的订单，自动使用二手物品设置的支付方式。积分兑换订单会直接扣除积分，创建订单即视为支付成功
      operationId: createOrder
      tags:
        - 订单管理
      parameters:
        - name: productId
          in: query
          description: 二手物品ID
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponseLong'
          headers: {}
      security: []
  /order/{orderId}:
    get:
      summary: 获取订单详情
      deprecated: false
      description: 根据订单ID获取订单详细信息
      operationId: getOrderById
      tags:
        - 订单管理
      parameters:
        - name: orderId
          in: path
          description: 订单ID
          required: true
          example: 0
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponseOrderVO'
          headers: {}
      security: []
  /order/statistics:
    get:
      summary: 获取订单统计信息
      deprecated: false
      description: 获取当前用户的订单统计信息
      operationId: getOrderStatistics
      tags:
        - 订单管理
      parameters: []
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponseOrderRequest'
          headers: {}
      security: []
  /order/list/seller:
    get:
      summary: 获取卖家订单列表
      deprecated: false
      description: 获取当前登录用户的卖家订单列表
      operationId: listSellerOrders
      tags:
        - 订单管理
      parameters:
        - name: current
          in: query
          description: 当前页码
          required: false
          schema:
            type: integer
            format: int32
            default: 1
        - name: size
          in: query
          description: 每页大小
          required: false
          schema:
            type: integer
            format: int32
            default: 10
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponsePageOrder'
          headers: {}
      security: []
  /order/list/buyer:
    get:
      summary: 获取买家订单列表
      deprecated: false
      description: 获取当前登录用户的买家订单列表
      operationId: listBuyerOrders
      tags:
        - 订单管理
      parameters:
        - name: current
          in: query
          description: 当前页码
          required: false
          schema:
            type: integer
            format: int32
            default: 1
        - name: size
          in: query
          description: 每页大小
          required: false
          schema:
            type: integer
            format: int32
            default: 10
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponsePageOrder'
          headers: {}
      security: []
  /order/admin/list:
    get:
      summary: 获取所有订单
      deprecated: false
      description: 管理员获取所有订单列表
      operationId: adminListOrders
      tags:
        - 订单管理
      parameters:
        - name: current
          in: query
          description: 当前页码
          required: false
          schema:
            type: integer
            format: int32
            default: 1
        - name: size
          in: query
          description: 每页大小
          required: false
          schema:
            type: integer
            format: int32
            default: 10
        - name: status
          in: query
          description: 订单状态
          required: false
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponsePageOrder'
          headers: {}
      security: []
components:
  schemas:
    OrderItem:
      type: object
      properties:
        column:
          type: string
        asc:
          type: boolean
    BaseResponseOrderRequest:
      type: object
      properties:
        code:
          type: integer
          format: int32
        data:
          $ref: '#/components/schemas/OrderRequest'
        message:
          type: string
        hashMap:
          type: object
          additionalProperties: {}
          properties: {}
    OrderRequest:
      type: object
      properties:
        totalOrders:
          type: integer
          format: int32
        pendingPaymentOrders:
          type: integer
          format: int32
        paidOrders:
          type: integer
          format: int32
        completedOrders:
          type: integer
          format: int32
        cancelledOrders:
          type: integer
          format: int32
        totalAmount:
          type: number
    BaseResponsePageOrder:
      type: object
      properties:
        code:
          type: integer
          format: int32
        data:
          $ref: '#/components/schemas/PageOrder'
        message:
          type: string
        hashMap:
          type: object
          additionalProperties: {}
          properties: {}
    Order:
      type: object
      properties:
        id:
          type: integer
          format: int64
        productId:
          type: integer
          format: int64
        buyerId:
          type: integer
          format: int64
        sellerId:
          type: integer
          format: int64
        amount:
          type: number
        paymentMethod:
          type: integer
          format: int32
        status:
          type: integer
          format: int32
        paymentProof:
          type: string
        createTime:
          type: string
          format: date-time
        finishTime:
          type: string
          format: date-time
        deleted:
          type: integer
          format: int32
    PageOrder:
      type: object
      properties:
        records:
          type: array
          items:
            $ref: '#/components/schemas/Order'
        total:
          type: integer
          format: int64
        size:
          type: integer
          format: int64
        current:
          type: integer
          format: int64
        orders:
          type: array
          items:
            $ref: '#/components/schemas/OrderItem'
          writeOnly: true
        optimizeCountSql:
          $ref: '#/components/schemas/PageOrder'
        searchCount:
          $ref: '#/components/schemas/PageOrder'
        optimizeJoinOfCountSql:
          type: boolean
          writeOnly: true
        maxLimit:
          type: integer
          format: int64
          writeOnly: true
        countId:
          type: string
          writeOnly: true
        pages:
          type: integer
          format: int64
    OrderConfirmRequest:
      type: object
      description: 订单确认请求
      properties:
        orderId:
          type: integer
          format: int64
        confirmType:
          type: integer
          format: int32
        description:
          type: string
    BaseResponseBoolean:
      type: object
      properties:
        code:
          type: integer
          format: int32
        data:
          type: boolean
        message:
          type: string
        hashMap:
          type: object
          additionalProperties: {}
          properties: {}
    BaseResponseLong:
      type: object
      properties:
        code:
          type: integer
          format: int32
        data:
          type: integer
          format: int64
        message:
          type: string
        hashMap:
          type: object
          additionalProperties: {}
          properties: {}
    BaseResponseOrderVO:
      type: object
      properties:
        code:
          type: integer
          format: int32
        data:
          $ref: '#/components/schemas/OrderVO'
        message:
          type: string
        hashMap:
          type: object
          additionalProperties: {}
          properties: {}
    OrderVO:
      type: object
      properties:
        id:
          type: integer
          format: int64
        productId:
          type: integer
          format: int64
        productName:
          type: string
        productImage:
          type: string
        buyerId:
          type: integer
          format: int64
        buyerName:
          type: string
        buyerAvatar:
          type: string
        buyerPhone:
          type: string
        sellerId:
          type: integer
          format: int64
        sellerName:
          type: string
        sellerAvatar:
          type: string
        sellerPhone:
          type: string
        amount:
          type: number
        paymentMethod:
          type: integer
          format: int32
        paymentMethodDesc:
          type: string
        status:
          type: integer
          format: int32
        statusDesc:
          type: string
        createTime:
          type: string
          format: date-time
        finishTime:
          type: string
          format: date-time
  responses: {}
  securitySchemes: {}
servers: []
security: []
