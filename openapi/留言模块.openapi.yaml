openapi: 3.0.1
info:
  title: 默认模块
  description: 跳蚤市场系统接口文档
  version: 1.0.0
tags:
  - name: 二手物品留言管理
paths:
  /product-comment/add:
    post:
      summary: 添加留言
      deprecated: false
      description: 用户对二手物品添加留言或回复
      operationId: addComment
      tags:
        - 二手物品留言管理
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCommentAddRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponseLong'
          headers: {}
      security: []
  /product-comment/tree:
    get:
      summary: 获取留言树形结构
      deprecated: false
      description: 获取二手物品的所有留言及回复，以树形结构展示
      operationId: getCommentTree
      tags:
        - 二手物品留言管理
      parameters:
        - name: productId
          in: query
          description: 二手物品ID
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponseListProductCommentVO'
          headers: {}
      security: []
  /product-comment/page:
    get:
      summary: 分页获取留言列表
      deprecated: false
      description: 分页获取二手物品的留言列表
      operationId: getCommentsByPage
      tags:
        - 二手物品留言管理
      parameters:
        - name: current
          in: query
          description: ''
          required: false
          example: 0
          schema:
            type: integer
            format: int32
        - name: pageSize
          in: query
          description: ''
          required: false
          example: 0
          schema:
            type: integer
            format: int32
        - name: productId
          in: query
          description: ''
          required: false
          example: 0
          schema:
            type: integer
            format: int64
        - name: userId
          in: query
          description: ''
          required: false
          example: 0
          schema:
            type: integer
            format: int64
        - name: parentId
          in: query
          description: ''
          required: false
          example: 0
          schema:
            type: integer
            format: int64
        - name: sortField
          in: query
          description: ''
          required: false
          example: ''
          schema:
            type: string
        - name: sortOrder
          in: query
          description: ''
          required: false
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponsePageProductCommentVO'
          headers: {}
      security: []
  /product-comment/{id}:
    delete:
      summary: 删除留言
      deprecated: false
      description: 用户删除自己的留言（仅限留言发布者和管理员）
      operationId: deleteComment
      tags:
        - 二手物品留言管理
      parameters:
        - name: id
          in: path
          description: 留言ID
          required: true
          example: 0
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BaseResponseBoolean'
          headers: {}
      security: []
components:
  schemas:
    OrderItem:
      type: object
      properties:
        column:
          type: string
        asc:
          type: boolean
    BaseResponseBoolean:
      type: object
      properties:
        code:
          type: integer
          format: int32
        data:
          type: boolean
        message:
          type: string
        hashMap:
          type: object
          additionalProperties: {}
          properties: {}
    BaseResponseLong:
      type: object
      properties:
        code:
          type: integer
          format: int32
        data:
          type: integer
          format: int64
        message:
          type: string
        hashMap:
          type: object
          additionalProperties: {}
          properties: {}
    ProductCommentAddRequest:
      type: object
      description: 留言添加信息
      properties:
        productId:
          type: integer
          format: int64
        content:
          type: string
        parentId:
          type: integer
          format: int64
        replyUserId:
          type: integer
          format: int64
    BaseResponseListProductCommentVO:
      type: object
      properties:
        code:
          type: integer
          format: int32
        data:
          type: array
          items:
            $ref: '#/components/schemas/ProductCommentVO'
        message:
          type: string
        hashMap:
          type: object
          additionalProperties: {}
          properties: {}
    ProductCommentVO:
      type: object
      properties:
        id:
          type: integer
          format: int64
        productId:
          type: integer
          format: int64
        userId:
          type: integer
          format: int64
        userName:
          type: string
        userAvatar:
          type: string
        content:
          type: string
        parentId:
          type: integer
          format: int64
        replyUserId:
          type: integer
          format: int64
        replyUserName:
          type: string
        createTime:
          type: string
          format: date-time
        updateTime:
          type: string
          format: date-time
    BaseResponsePageProductCommentVO:
      type: object
      properties:
        code:
          type: integer
          format: int32
        data:
          $ref: '#/components/schemas/PageProductCommentVO'
        message:
          type: string
        hashMap:
          type: object
          additionalProperties: {}
          properties: {}
    PageProductCommentVO:
      type: object
      properties:
        records:
          type: array
          items:
            $ref: '#/components/schemas/ProductCommentVO'
        total:
          type: integer
          format: int64
        size:
          type: integer
          format: int64
        current:
          type: integer
          format: int64
        orders:
          type: array
          items:
            $ref: '#/components/schemas/OrderItem'
          writeOnly: true
        optimizeCountSql:
          $ref: '#/components/schemas/PageProductCommentVO'
        searchCount:
          $ref: '#/components/schemas/PageProductCommentVO'
        optimizeJoinOfCountSql:
          type: boolean
          writeOnly: true
        maxLimit:
          type: integer
          format: int64
          writeOnly: true
        countId:
          type: string
          writeOnly: true
        pages:
          type: integer
          format: int64
  responses: {}
  securitySchemes: {}
servers: []
security: []
